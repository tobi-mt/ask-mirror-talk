# Environment Configuration Template
# Copy this to .env and adjust values as needed

# Core
APP_NAME="Ask Mirror Talk"
ENVIRONMENT=production

# Database
DATABASE_URL=postgresql+psycopg://mirror:mirror@db:5432/mirror_talk

# RSS Feed
RSS_URL=https://your-podcast-feed-url.com/feed.xml
RSS_POLL_MINUTES=60

# Ingestion (Memory Optimization)
MAX_EPISODES_PER_RUN=1  # Process one at a time to reduce memory

# Memory-Optimized Settings
# Option 1: Ultra-low memory (no ML models)
EMBEDDING_PROVIDER=local  # Uses hash-based embeddings, ~100MB memory
WHISPER_MODEL=tiny        # Smallest model, ~75MB

# Option 2: Better quality (uses ML models, more memory)
# EMBEDDING_PROVIDER=sentence_transformers  # ~90MB
# WHISPER_MODEL=base                        # ~140MB

# Option 3: Best quality (highest memory)
# EMBEDDING_PROVIDER=sentence_transformers
# WHISPER_MODEL=small  # ~500MB - only use if you have >2GB memory!

# Transcription
TRANSCRIPTION_PROVIDER=faster_whisper

# Embeddings
EMBEDDING_DIM=384

# Retrieval
TOP_K=6
MIN_SIMILARITY=0.15
DIVERSITY_LAMBDA=0.7  # MMR diversity: 0.0=max diversity, 1.0=max relevance (default 0.7)

# Chunking
MAX_CHUNK_CHARS=1400
MIN_CHUNK_CHARS=300

# API Rate Limiting
RATE_LIMIT_PER_MINUTE=10  # Reduced to prevent memory spikes

# Admin Dashboard
ADMIN_ENABLED=true
ADMIN_USER=admin
ADMIN_PASSWORD=change-me-to-something-secure
ADMIN_IP_ALLOWLIST=  # Optional: comma-separated IPs/CIDRs

# Memory Guidelines
# ===================
# Available Memory | Recommended Settings
# -------------------|---------------------
# < 512MB           | EMBEDDING_PROVIDER=local, WHISPER_MODEL=tiny
# 512MB - 1GB       | EMBEDDING_PROVIDER=sentence_transformers, WHISPER_MODEL=tiny
# 1GB - 2GB         | EMBEDDING_PROVIDER=sentence_transformers, WHISPER_MODEL=base
# > 2GB             | EMBEDDING_PROVIDER=sentence_transformers, WHISPER_MODEL=small
