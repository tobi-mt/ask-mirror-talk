# Railway deployment configuration
# This file is automatically detected by Railway

# Strategy: Use default "Dockerfile" (lightweight API image)
# Override per-service in Railway Dashboard using custom Dockerfile path

[build]
builder = "dockerfile"
# dockerfilePath defaults to "Dockerfile" (API image)

[deploy]
# Per-service configuration in Railway Dashboard:
#
# mirror-talk-api service:
#   Settings > Build: Leave default (uses Dockerfile)
#   Settings > Deploy > Healthcheck: Enable, path=/health, timeout=300
#   Settings > Deploy > Start Command: (leave default)
#
# mirror-talk-ingestion service:
#   Settings > Build > Dockerfile Path: Dockerfile.worker (MUST OVERRIDE)
#   Settings > Deploy > Healthcheck: Disable
#   Settings > Deploy > Start Command: python scripts/bulk_ingest.py --max-episodes 20 --no-confirm
#   Settings > Variables > WHISPER_MODEL: tiny
#
# mirror-talk-qotd-cron service (optional, for daily push notifications):
#   Settings > Build > Dockerfile Path: Dockerfile.worker
#   Settings > Deploy > Cron Schedule: 0 9 * * * (9 AM UTC daily)
#   Settings > Deploy > Start Command: python3 scripts/send_daily_qotd.py
#   Settings > Variables: same DB + VAPID keys as the API service
